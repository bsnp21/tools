<html>

<head>
    <title>.</title>
    <base target="_blank" />
    <META http-equiv="Content-Type" content="text/html;" charset="UTF-8">
    <META name="viewport" content="width=device-witdh, initial-scale=1, maximum-scale=1, user-scale=0">



    <script src="https://wdingbox.github.io/ham12/jq/jquery-2_1_3.min.js"></script>
    <script src="https://wdingbox.github.io/ham12/utility/htmf/bsnp/BibleStudyNotePad.js?v2021-01">
    </script>
    <script language="javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/2.3.1/jsencrypt.min.js"></script>


    <script src="./keyprv.js"></script>
    <script src="./keypub.js"></script>
</head>

<style>
    body {
        background-color: lightblue;
    }

    textarea {
        width: 100%;
        height: 500px;
    }
    .hili{
        background-color: aqua;
    }
    textarea:focus{
        background-color: antiquewhite;
    }
</style>
<script>

    $(function () {
        $("#encrypter").on("click", function () {
            var inp = $("#txa").val()
            var encrypt = new JSEncrypt();
            encrypt.setPublicKey(keypub);
            var out = encrypt.encrypt(inp);
            $("#out").val(out).focus()
            //$("#txa").val("")

            $("#txt").html(inp + "<br/>InputLen=" + inp.length + "<br/>OutputLen=" + out.length)
            if (inp.length > 500) alert(`ERROR: \nInput Length=${inp.length} > 500(Max) .`)
        })
        $("#decrypter").on("click", function () {
            var inp = $("#out").val()
            var encrypt = new JSEncrypt();
            encrypt.setPrivateKey(keyprv);
            var out = encrypt.decrypt(inp);
            $("#txa").val(out).focus()
            if(out.length===0) $("#txt").text("Decryption ERROR or Empty.")
        })

        /////////

        $("#btoa64").on("click", function () {
            var inp = $("#txa").val()
            var out = btoa(inp);
            $("#out").val(out).focus()
            //$("#txa").val("").focus()

            $("#txt").html(inp + "<hr/><br>InputLen=" + inp.length + "<br/>OutputLen=" + out.length)
            
        })
        $("#atob64").on("click", function () {
            var inp = $("#out").val()
            var out = atob(inp);
            $("#txa").val(out).focus()
            if(out.length===0) $("#txt").text("Decryption ERROR or Empty.")
        })

        $("button").on("click",function(){
            $(".hili").removeClass("hili")
            $(this).addClass("hili")
        })
    })
</script>



<body>
    <textarea id="txa" placeholder="original string">text</textarea>
    <br>
    <button id="encrypter">encrypt &darr;</button><button id="decrypter">decrypt &uarr;</button> | 
    <button id="btoa64">btoa &darr;</button><button id="atob64">atob &uarr;</button> |
    <button onclick="$('#out').val('')">clear &darr;</button><button onclick="$('#txa').val('')">clear &uarr;</button> |
    <button onclick="$('#out').val($('#txa').val())">move &darr;</button><button onclick="$('#txa').val($('#out').val())">move &uarr;</button> |
    <br>
    <textarea id="out"></textarea>
    <div id="txt"></div>
</body>

</html>